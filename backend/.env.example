# ==========================================
# Backend Flask Configuration
# ==========================================

FLASK_APP=app.py
FLASK_ENV=development
FLASK_DEBUG=1
HOST=0.0.0.0
PORT=5001

# Secret key for Flask sessions (generate a random string for production)
SECRET_KEY=your-secret-key-here-change-in-production

# ==========================================
# Clerk Authentication (for JWT verification)
# ==========================================
# Get this from https://clerk.com dashboard
# Same secret key as frontend - used to verify JWT tokens

CLERK_SECRET_KEY=sk_test_your_key_here

# ==========================================
# AI/LLM API Keys
# ==========================================

# Anthropic Claude (primary LLM)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# OpenAI (fallback LLM + embeddings)
OPENAI_API_KEY=your_openai_api_key_here

# Model selection
PRIMARY_LLM_PROVIDER=anthropic
PRIMARY_MODEL=claude-3-5-sonnet-20241022
FALLBACK_LLM_PROVIDER=openai
FALLBACK_MODEL=gpt-4o

# Embedding model for vector search
EMBEDDING_MODEL=text-embedding-3-small

# ==========================================
# Database Configuration
# ==========================================

# Weaviate Vector Database
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=
WEAVIATE_SCHEME=http

# Collection names
CHESS_GAMES_COLLECTION=ChessGames
CHESS_POSITIONS_COLLECTION=ChessPositions
KNOWLEDGE_BASE_COLLECTION=ChessKnowledge

# Redis (conversation cache and session management)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# SQLite (conversation persistence)
SQLITE_DB_PATH=./data/conversations.db

# ==========================================
# Chess Services Configuration
# ==========================================

# Stockfish Engine
STOCKFISH_PATH=/usr/local/bin/stockfish
STOCKFISH_THREADS=4
STOCKFISH_HASH_SIZE=256
STOCKFISH_DEPTH=20

# Board-to-FEN Service
BOARD_TO_FEN_MODEL_PATH=./services/board-to-fen/board_to_fen/saved_models/

# ==========================================
# TWIC Database Configuration
# ==========================================

# TWIC master database location
TWIC_DATABASE_PATH=./data/twic/twic_master_database.pgn

# Auto-download TWIC updates
AUTO_UPDATE_TWIC=false
TWIC_LATEST_ISSUE=1560

# ==========================================
# Voice Services (Optional)
# ==========================================

# Whisper (Speech-to-Text)
WHISPER_MODEL=base
WHISPER_DEVICE=cpu

# ElevenLabs (Text-to-Speech)
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
ELEVENLABS_VOICE_ID=your_voice_id_here

# ==========================================
# RAG System Configuration
# ==========================================

# Number of similar games to retrieve
TOP_K_RESULTS=10

# Minimum similarity score for retrieval
MIN_SIMILARITY_SCORE=0.7

# Context window size for LLM
CONTEXT_WINDOW=8000

# Enable/disable conversation memory
ENABLE_CONVERSATION_MEMORY=true

# Max conversation history length (number of turns)
MAX_CONVERSATION_HISTORY=20

# ==========================================
# External Chess APIs
# ==========================================

# Lichess API
LICHESS_API_URL=https://lichess.org/api

# Chess.com API
CHESS_COM_API_URL=https://api.chess.com/pub

# ChessDB (cloud opening database)
CHESSDB_API_URL=https://www.chessdb.cn/cdb.php

# ==========================================
# Logging Configuration
# ==========================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log file path
LOG_FILE=./logs/backend.log

# Enable structured logging
STRUCTURED_LOGGING=true

# ==========================================
# Performance & Scaling
# ==========================================

# Socket.IO settings
SOCKETIO_ASYNC_MODE=threading
SOCKETIO_MESSAGE_QUEUE=redis://localhost:6379/0

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Request timeout (seconds)
REQUEST_TIMEOUT=300

# Max concurrent Stockfish processes
MAX_STOCKFISH_PROCESSES=4

# ==========================================
# Feature Flags
# ==========================================

# Enable/disable features
ENABLE_VOICE_INPUT=false
ENABLE_VOICE_OUTPUT=false
ENABLE_POSITION_ANALYSIS=true
ENABLE_GAME_SEARCH=true
ENABLE_OPENING_EXPLORER=true
ENABLE_RAG_SYSTEM=true

# ==========================================
# Development Settings
# ==========================================

# Enable debug mode features
DEBUG_MODE=true

# Enable SQL query logging
LOG_SQL_QUERIES=false

# Enable LLM request/response logging
LOG_LLM_REQUESTS=true

# Disable authentication for local development
DISABLE_AUTH=true
